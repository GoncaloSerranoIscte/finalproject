{% extends "bookshelf/index.html" %}

{% block title %}Ver Livros{% endblock %}

{% block bodyPag %}
<header>
    <form method="get" id="book-form">
        <label for="order_by">Sort By:</label>
        <select name="order_by" id="order_by">
            <option value="-pub_data"{% if order_by == '-pub_data' %} selected{% endif %}>Release Date (Newest First)</option>
            <option value="pub_data"{% if order_by == 'pub_data' %} selected{% endif %}>Release Date (Oldest First)</option>
            <option value="-rating"{% if order_by == '-rating' %} selected{% endif %}>Rating (Highest First)</option>
            <option value="rating"{% if order_by == 'rating' %} selected{% endif %}>Rating (Lowest First)</option>
        </select>
        <button type="submit">Sort</button>
    </form>
</header>
{% if livros %}
{% load static %}
<ul id="lista-livros">
    {% for book in livros %}
    <ul>
        <br>Book: <a href="{% url 'bookshelf:detalhe' book.id %}">{{ book.name }}</a>

        <br>Release Date: {{ book.pub_data.day }}/{{ book.pub_data.month }}/{{ book.pub_data.year }}
        <br>Rating: {{ book.rating }}
        <br><img id="book-cover" src="{% static book.image %}"
             alt="Imagem nÃ£o encontrada" class="rounded-image-mini" title="Book Cover"></div>
        <br><br><br>

    </ul>
    {% endfor %}
</ul>
{% else %}
<p>Bookshelf empty.</p>
{% endif %}
<script>
  document.querySelector('#book-form').addEventListener('submit', function() {
    event.preventDefault();
    const orderBy = document.querySelector('#order_by').value;
    window.location.href = window.location.href.split('?')[0] + '?order_by=' + orderBy;
  });
</script>
{% endblock %}


